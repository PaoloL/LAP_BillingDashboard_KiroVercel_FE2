module.exports=[81673,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(11011),f=a.i(187),g=a.i(97895);let h=(0,f.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function i({className:a,variant:c,asChild:d=!1,...f}){let i=d?e.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,g.cn)(h({variant:c}),a),...f})}var j=a.i(40695),k=a.i(67900),l=a.i(70106);let m=(0,l.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var n=a.i(15618),o=a.i(33441),p=a.i(62213),p=p;let q=(0,l.default)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),r=(0,l.default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),s=(0,l.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var t=a.i(65733),u=a.i(5522),v=a.i(17171),w=a.i(46893);async function x(a,b={}){let c={"Content-Type":"application/json",...b.headers},d=await fetch(`https://qwvzcttk3b.execute-api.eu-west-1.amazonaws.com/dev${a}`,{...b,headers:c});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a.error?.message||`API Error: ${d.statusText}`)}return 204===d.status?{}:d.json()}function y({open:a,onOpenChange:d,onSuccess:e}){let[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(""),[k,l]=(0,c.useState)({accountId:"",accountName:"",distributorName:"",legalEntityName:"",vatNumber:"",crossAccountRoleArn:""}),[m,n]=(0,c.useState)(""),o=a=>12===a.length&&/^\d{12}$/.test(a)?(n(""),!0):(n("Account ID must be exactly 12 digits"),!1),p=a=>b=>{l(c=>({...c,[a]:b.target.value}))},q=async a=>{if(a.preventDefault(),o(k.accountId))try{let a;g(!0),i(""),await (a=k,x("/payer-accounts",{method:"POST",body:JSON.stringify(a)})),e?.(),d(!1),l({accountId:"",accountName:"",distributorName:"",legalEntityName:"",vatNumber:"",crossAccountRoleArn:""}),n("")}catch(a){i(a instanceof Error?a.message:"Failed to create payer account")}finally{g(!1)}};return(0,b.jsx)(t.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(t.DialogContent,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[550px]",children:[(0,b.jsxs)(t.DialogHeader,{children:[(0,b.jsx)(t.DialogTitle,{className:"text-[#00243E]",children:"Register Payer Account"}),(0,b.jsx)(t.DialogDescription,{children:"Add a new payer account to manage billing and costs"})]}),(0,b.jsxs)("form",{onSubmit:q,children:[(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[h&&(0,b.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:h}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"account-id",children:["Account ID ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(u.Input,{id:"account-id",placeholder:"123456789012",value:k.accountId,onChange:a=>{let b=a.target.value.replace(/\D/g,"").slice(0,12);l(a=>({...a,accountId:b})),12===b.length?o(b):b.length>0?n("Account ID must be exactly 12 digits"):n("")},maxLength:12,required:!0,className:m?"border-red-500":""}),m&&(0,b.jsx)("p",{className:"text-xs text-red-500",children:m}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Must be exactly 12 digits"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"account-name",children:["Account Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(u.Input,{id:"account-name",placeholder:"Production Payer Account",value:k.accountName,onChange:p("accountName"),required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"distributor-name",children:["Distributor Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(u.Input,{id:"distributor-name",placeholder:"AWS Distributor Inc.",value:k.distributorName,onChange:p("distributorName"),required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"legal-entity",children:["Legal Entity Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(u.Input,{id:"legal-entity",placeholder:"MSP/Partner legal entity name",value:k.legalEntityName,onChange:p("legalEntityName"),required:!0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Legal entity name of the MSP/Partner managing this payer account"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"vat-number",children:["VAT Number ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(u.Input,{id:"vat-number",placeholder:"DE123456789",value:k.vatNumber,onChange:p("vatNumber"),required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"role-arn",children:["Cross-Account Role ARN ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(w.Textarea,{id:"role-arn",placeholder:"arn:aws:iam::123456789012:role/BillingDataAccessRole",rows:3,value:k.crossAccountRoleArn,onChange:p("crossAccountRoleArn"),required:!0,className:"font-mono text-sm"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Required for parquet file processing from your AWS account"})]})]}),(0,b.jsxs)(t.DialogFooter,{children:[(0,b.jsx)(j.Button,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,b.jsxs)(j.Button,{type:"submit",className:"bg-[#00243E] hover:bg-[#00243E]/90",disabled:f,children:[f&&(0,b.jsx)(s,{className:"mr-2 h-4 w-4 animate-spin"}),"Register Payer"]})]})]})]})})}function z({open:a,onOpenChange:c,account:d}){return d?(0,b.jsx)(t.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(t.DialogContent,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[550px]",children:[(0,b.jsxs)(t.DialogHeader,{children:[(0,b.jsx)(t.DialogTitle,{className:"text-[#00243E]",children:"Edit Payer Account"}),(0,b.jsx)(t.DialogDescription,{children:"Update payer account information"})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),c(!1)},children:[(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(v.Label,{htmlFor:"edit-account-id",children:"Account ID"}),(0,b.jsx)(u.Input,{id:"edit-account-id",value:d.accountId,disabled:!0,className:"bg-muted"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(v.Label,{htmlFor:"edit-account-name",children:"Account Name"}),(0,b.jsx)(u.Input,{id:"edit-account-name",value:d.accountName,disabled:!0,className:"bg-muted"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"edit-distributor-name",children:["Distributor Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(u.Input,{id:"edit-distributor-name",defaultValue:d.distributorName,placeholder:"AWS Distributor Inc.",required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"edit-legal-entity",children:["Legal Entity Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(u.Input,{id:"edit-legal-entity",defaultValue:d.legalEntityName,placeholder:"MSP/Partner legal entity name",required:!0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Legal entity name of the MSP/Partner managing this payer account"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"edit-vat-number",children:["VAT Number ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(u.Input,{id:"edit-vat-number",defaultValue:d.vatNumber,placeholder:"DE123456789",required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"edit-role-arn",children:["Cross-Account Role ARN ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(w.Textarea,{id:"edit-role-arn",defaultValue:d.crossAccountRoleArn,placeholder:"arn:aws:iam::123456789012:role/BillingDataAccessRole",rows:3,required:!0,className:"font-mono text-sm"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Required for parquet file processing from your AWS account"})]})]}),(0,b.jsxs)(t.DialogFooter,{children:[(0,b.jsx)(j.Button,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),(0,b.jsx)(j.Button,{type:"submit",className:"bg-[#00243E] hover:bg-[#00243E]/90",children:"Save Changes"})]})]})]})}):null}var A=a.i(7554),B=a.i(70121),C=a.i(50104),D=a.i(25152),E=a.i(3688),F=a.i(30553),G="Switch",[H,I]=(0,C.createContextScope)(G),[J,K]=H(G),L=c.forwardRef((a,d)=>{let{__scopeSwitch:e,name:f,checked:g,defaultChecked:h,required:i,disabled:j,value:k="on",onCheckedChange:l,form:m,...n}=a,[o,p]=c.useState(null),q=(0,B.useComposedRefs)(d,a=>p(a)),r=c.useRef(!1),s=!o||m||!!o.closest("form"),[t=!1,u]=(0,D.useControllableState)({prop:g,defaultProp:h,onChange:l});return(0,b.jsxs)(J,{scope:e,checked:t,disabled:j,children:[(0,b.jsx)(F.Primitive.button,{type:"button",role:"switch","aria-checked":t,"aria-required":i,"data-state":P(t),"data-disabled":j?"":void 0,disabled:j,value:k,...n,ref:q,onClick:(0,A.composeEventHandlers)(a.onClick,a=>{u(a=>!a),s&&(r.current=a.isPropagationStopped(),r.current||a.stopPropagation())})}),s&&(0,b.jsx)(O,{control:o,bubbles:!r.current,name:f,value:k,checked:t,required:i,disabled:j,form:m,style:{transform:"translateX(-100%)"}})]})});L.displayName=G;var M="SwitchThumb",N=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=K(M,d);return(0,b.jsx)(F.Primitive.span,{"data-state":P(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});N.displayName=M;var O=a=>{let d,{control:e,checked:f,bubbles:g=!0,...h}=a,i=c.useRef(null),j=(d=c.useRef({value:f,previous:f}),c.useMemo(()=>(d.current.value!==f&&(d.current.previous=d.current.value,d.current.value=f),d.current.previous),[f])),k=(0,E.useSize)(e);return c.useEffect(()=>{let a=i.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(j!==f&&b){let c=new Event("click",{bubbles:g});b.call(a,f),a.dispatchEvent(c)}},[j,f,g]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:f,...h,tabIndex:-1,ref:i,style:{...a.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function P(a){return a?"checked":"unchecked"}function Q({className:a,...c}){return(0,b.jsx)(L,{"data-slot":"switch",className:(0,g.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(N,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}let R=(a,b)=>b>a?"Customer discount cannot exceed Reseller discount.":null;function S({open:a,onOpenChange:d,payerAccount:e}){let[f,g]=(0,c.useState)(0),[h,i]=(0,c.useState)(0),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null);return(0,b.jsx)(t.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(t.DialogContent,{className:"sm:max-w-[525px]",children:[(0,b.jsxs)(t.DialogHeader,{children:[(0,b.jsx)(t.DialogTitle,{className:"text-[#00243E]",children:"Register Usage Account"}),(0,b.jsx)(t.DialogDescription,{children:e?`Add a new usage account under ${e.accountName}`:"Add a new usage account with billing configuration"})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=R(f,h);b?n(b):d(!1)},children:[(0,b.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-[#00243E]",children:"Account Information"}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(v.Label,{htmlFor:"usage-id",children:"Account ID"}),(0,b.jsx)(u.Input,{id:"usage-id",placeholder:"345678901234",required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(v.Label,{htmlFor:"customer",children:"Customer Name"}),(0,b.jsx)(u.Input,{id:"customer",placeholder:"Acme Corporation",required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(v.Label,{htmlFor:"vat",children:"VAT Number"}),(0,b.jsx)(u.Input,{id:"vat",placeholder:"DE123456789",required:!0})]}),e&&(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(v.Label,{htmlFor:"payer",children:"Payer Account"}),(0,b.jsx)(u.Input,{id:"payer",value:`${e.accountName} (${e.accountId})`,disabled:!0,className:"bg-muted"})]})]}),(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-[#00243E]",children:"Financial Configuration"}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(v.Label,{htmlFor:"reseller-discount",children:"Reseller Discount (%)"}),(0,b.jsx)(u.Input,{id:"reseller-discount",type:"number",min:"0",max:"100",step:"0.01",placeholder:"15",value:f,onChange:a=>{let b;g(b=Number(a.target.value)),n(R(b,h))},required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(v.Label,{htmlFor:"customer-discount",children:"Customer Discount (%)"}),(0,b.jsx)(u.Input,{id:"customer-discount",type:"number",min:"0",max:"100",step:"0.01",placeholder:"10",value:h,onChange:a=>{let b;i(b=Number(a.target.value)),n(R(f,b))},required:!0})]}),m&&(0,b.jsx)("p",{className:"text-sm text-[#EBB700]",children:m})]}),(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-[#00243E]",children:"Credit Handling"}),(0,b.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(v.Label,{htmlFor:"rebate",className:"cursor-pointer font-medium",children:"Rebate Credits to Usage Account"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"If enabled, credit notes will be deducted from the Usage Account's total cost."})]}),(0,b.jsx)(Q,{id:"rebate",checked:k,onCheckedChange:l})]})]})]}),(0,b.jsxs)(t.DialogFooter,{children:[(0,b.jsx)(j.Button,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,b.jsx)(j.Button,{type:"submit",className:"bg-[#00243E] hover:bg-[#00243E]/90",children:"Register Account"})]})]})]})})}function T({open:a,onOpenChange:d,account:e}){let[f,g]=(0,c.useState)(e?.resellerDiscount||0),[h,i]=(0,c.useState)(e?.customerDiscount||0),[k,l]=(0,c.useState)(e?.rebateCredits||!1),[m,n]=(0,c.useState)(null);return e?(0,b.jsx)(t.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(t.DialogContent,{className:"sm:max-w-[525px]",children:[(0,b.jsxs)(t.DialogHeader,{children:[(0,b.jsx)(t.DialogTitle,{className:"text-[#00243E]",children:"Edit Usage Account"}),(0,b.jsxs)(t.DialogDescription,{children:["Update billing configuration for ",e.customer]})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b=R(f,h);b?n(b):(console.log("Updating usage account:",e?.id),d(!1))},children:[(0,b.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-[#00243E]",children:"Account Information"}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(v.Label,{htmlFor:"edit-usage-id",children:"Account ID"}),(0,b.jsx)(u.Input,{id:"edit-usage-id",value:e.id,disabled:!0,className:"bg-muted"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(v.Label,{htmlFor:"edit-customer",children:"Customer Name"}),(0,b.jsx)(u.Input,{id:"edit-customer",value:e.customer,disabled:!0,className:"bg-muted"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(v.Label,{htmlFor:"edit-vat",children:"VAT Number"}),(0,b.jsx)(u.Input,{id:"edit-vat",placeholder:"DE123456789",defaultValue:e.vatNumber,required:!0})]})]}),(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-[#00243E]",children:"Financial Configuration"}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(v.Label,{htmlFor:"edit-reseller-discount",children:"Reseller Discount (%)"}),(0,b.jsx)(u.Input,{id:"edit-reseller-discount",type:"number",min:"0",max:"100",step:"0.01",placeholder:"15",value:f,onChange:a=>{let b;g(b=Number(a.target.value)),n(R(b,h))},required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(v.Label,{htmlFor:"edit-customer-discount",children:"Customer Discount (%)"}),(0,b.jsx)(u.Input,{id:"edit-customer-discount",type:"number",min:"0",max:"100",step:"0.01",placeholder:"10",value:h,onChange:a=>{let b;i(b=Number(a.target.value)),n(R(f,b))},required:!0})]}),m&&(0,b.jsx)("p",{className:"text-sm text-[#EBB700]",children:m})]}),(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-[#00243E]",children:"Credit Handling"}),(0,b.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(v.Label,{htmlFor:"edit-rebate",className:"cursor-pointer font-medium",children:"Rebate Credits to Usage Account"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"If enabled, credit notes will be deducted from the Usage Account's total cost."})]}),(0,b.jsx)(Q,{id:"edit-rebate",checked:k,onCheckedChange:l})]})]})]}),(0,b.jsxs)(t.DialogFooter,{children:[(0,b.jsx)(j.Button,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,b.jsx)(j.Button,{type:"submit",className:"bg-[#00243E] hover:bg-[#00243E]/90",children:"Save Changes"})]})]})]})}):null}var U=a.i(24050),V=a.i(77192),W=a.i(7827),X=a.i(92843),Y="Tabs",[Z,$]=(0,C.createContextScope)(Y,[U.createRovingFocusGroupScope]),_=(0,U.createRovingFocusGroupScope)(),[aa,ab]=Z(Y),ac=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,onValueChange:f,defaultValue:g,orientation:h="horizontal",dir:i,activationMode:j="automatic",...k}=a,l=(0,W.useDirection)(i),[m,n]=(0,D.useControllableState)({prop:e,onChange:f,defaultProp:g});return(0,b.jsx)(aa,{scope:d,baseId:(0,X.useId)(),value:m,onValueChange:n,orientation:h,dir:l,activationMode:j,children:(0,b.jsx)(F.Primitive.div,{dir:l,"data-orientation":h,...k,ref:c})})});ac.displayName=Y;var ad="TabsList",ae=c.forwardRef((a,c)=>{let{__scopeTabs:d,loop:e=!0,...f}=a,g=ab(ad,d),h=_(d);return(0,b.jsx)(U.Root,{asChild:!0,...h,orientation:g.orientation,dir:g.dir,loop:e,children:(0,b.jsx)(F.Primitive.div,{role:"tablist","aria-orientation":g.orientation,...f,ref:c})})});ae.displayName=ad;var af="TabsTrigger",ag=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,disabled:f=!1,...g}=a,h=ab(af,d),i=_(d),j=aj(h.baseId,e),k=ak(h.baseId,e),l=e===h.value;return(0,b.jsx)(U.Item,{asChild:!0,...i,focusable:!f,active:l,children:(0,b.jsx)(F.Primitive.button,{type:"button",role:"tab","aria-selected":l,"aria-controls":k,"data-state":l?"active":"inactive","data-disabled":f?"":void 0,disabled:f,id:j,...g,ref:c,onMouseDown:(0,A.composeEventHandlers)(a.onMouseDown,a=>{f||0!==a.button||!1!==a.ctrlKey?a.preventDefault():h.onValueChange(e)}),onKeyDown:(0,A.composeEventHandlers)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&h.onValueChange(e)}),onFocus:(0,A.composeEventHandlers)(a.onFocus,()=>{let a="manual"!==h.activationMode;l||f||!a||h.onValueChange(e)})})})});ag.displayName=af;var ah="TabsContent",ai=c.forwardRef((a,d)=>{let{__scopeTabs:e,value:f,forceMount:g,children:h,...i}=a,j=ab(ah,e),k=aj(j.baseId,f),l=ak(j.baseId,f),m=f===j.value,n=c.useRef(m);return c.useEffect(()=>{let a=requestAnimationFrame(()=>n.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,b.jsx)(V.Presence,{present:g||m,children:({present:c})=>(0,b.jsx)(F.Primitive.div,{"data-state":m?"active":"inactive","data-orientation":j.orientation,role:"tabpanel","aria-labelledby":k,hidden:!c,id:l,tabIndex:0,...i,ref:d,style:{...a.style,animationDuration:n.current?"0s":void 0},children:c&&h})})});function aj(a,b){return`${a}-trigger-${b}`}function ak(a,b){return`${a}-content-${b}`}function al({className:a,...c}){return(0,b.jsx)(ac,{"data-slot":"tabs",className:(0,g.cn)("flex flex-col gap-2",a),...c})}function am({className:a,...c}){return(0,b.jsx)(ae,{"data-slot":"tabs-list",className:(0,g.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...c})}function an({className:a,...c}){return(0,b.jsx)(ag,{"data-slot":"tabs-trigger",className:(0,g.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...c})}function ao({className:a,...c}){return(0,b.jsx)(ai,{"data-slot":"tabs-content",className:(0,g.cn)("flex-1 outline-none",a),...c})}ai.displayName=ah;var ap=a.i(81926),p=p;let aq=[{period:"2025-01",usage:5e3,fee:100,credit:234.56,customerDiscount:10,rebateCredits:!0},{period:"2024-12",usage:6300,fee:100,credit:243.21,customerDiscount:10,rebateCredits:!0},{period:"2024-11",usage:4700,fee:100,credit:176.23,customerDiscount:10,rebateCredits:!0}];function ar({open:a,onOpenChange:c,account:d}){return(0,b.jsxs)(t.Dialog,{open:a,onOpenChange:c,children:[(0,b.jsxs)(t.DialogHeader,{children:[(0,b.jsx)(t.DialogTitle,{className:"text-[#00243E]",children:d.customer}),(0,b.jsxs)(t.DialogDescription,{children:["Account ID: ",d.id]})]}),(0,b.jsx)(t.DialogContent,{className:"sm:max-w-[600px]",children:(0,b.jsxs)(al,{defaultValue:"overview",className:"w-full",children:[(0,b.jsxs)(am,{className:"grid w-full grid-cols-2",children:[(0,b.jsx)(an,{value:"overview",children:"Overview"}),(0,b.jsx)(an,{value:"transactions",children:"Transactions"})]}),(0,b.jsxs)(ao,{value:"overview",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4 rounded-lg border border-border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Account Status"}),(0,b.jsx)(i,{variant:"secondary",className:(0,g.cn)("Active"===d.status?"bg-green-500/10 text-green-600":"bg-gray-500/10 text-gray-600"),children:d.status})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"VAT Number"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-foreground",children:d.vatNumber})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Customer Discount"}),(0,b.jsxs)("span",{className:"text-sm font-semibold text-foreground",children:[d.discountValue,"%"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Rebate Credits"}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:d.rebateCredits?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Check,{className:"h-4 w-4 text-[#026172]"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-foreground",children:"Enabled"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.default,{className:"h-4 w-4 text-gray-600"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-foreground",children:"Disabled"})]})})]})]}),(0,b.jsxs)("div",{className:"space-y-3 rounded-lg border border-border p-4",children:[(0,b.jsx)("h4",{className:"font-semibold text-[#00243E]",children:"Funds Utilization"}),(0,b.jsx)("div",{className:"h-3 w-full overflow-hidden rounded-full bg-slate-200",children:(0,b.jsx)("div",{className:"h-full rounded-full bg-[#026172]",style:{width:`${d.fundsUtilization}%`}})}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("span",{className:"text-muted-foreground",children:[(0,ap.formatCurrency)(d.totalUsage)," used"]}),(0,b.jsxs)("span",{className:"font-semibold text-foreground",children:[d.fundsUtilization,"%"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between border-t border-border pt-3 text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Total Deposit"}),(0,b.jsx)("span",{className:"font-semibold text-foreground",children:(0,ap.formatCurrency)(d.totalDeposit)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Remaining"}),(0,b.jsx)("span",{className:"font-semibold text-[#026172]",children:(0,ap.formatCurrency)(d.totalDeposit-d.totalUsage)})]})]})]}),(0,b.jsx)(ao,{value:"transactions",className:"space-y-3",children:(0,b.jsx)("div",{className:"divide-y divide-border rounded-lg border border-border",children:aq.map((a,c)=>{var d,e,f,g;let h,{totalCost:i,discountedCost:j}=(d=a.usage,e=a.fee,f=a.credit,g=a.customerDiscount,{totalCost:h=d+e+(a.rebateCredits?f:0),discountedCost:h-h*g/100});return(0,b.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:a.period}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,b.jsxs)("span",{className:"text-[#EC9400]",children:["Usage: ",(0,ap.formatCurrency)(a.usage)]}),(0,b.jsxs)("span",{className:"text-[#00243E]",children:["Fee: ",(0,ap.formatCurrency)(a.fee)]}),a.rebateCredits&&a.credit>0&&(0,b.jsxs)("span",{className:"text-[#026172]",children:["Credit: ",(0,ap.formatCurrency)(a.credit)]})]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Net Cost: ",(0,ap.formatCurrency)(i)]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-lg font-semibold text-[#00243E]",children:(0,ap.formatCurrency)(j)}),(0,b.jsxs)("p",{className:"text-xs text-[#026172]",children:["Saved ",(0,ap.formatCurrency)(i-j)]})]})]},c)})})})]})})]})}function as(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)([]),[h,l]=(0,c.useState)(!0),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(null);(0,c.useEffect)(()=>{Q()},[]);let Q=async()=>{try{let a,b,c,d;l(!0),u(null);let[f,h]=await Promise.all([(a=new URLSearchParams,b=a.toString(),x(`/payer-accounts${b?`?${b}`:""}`)),(c=new URLSearchParams,d=c.toString(),x(`/usage-accounts${d?`?${d}`:""}`))]);e(f.data),g(h.data)}catch(a){u(a instanceof Error?a.message:"Failed to load accounts")}finally{l(!1)}},R=(a,b)=>{b.stopPropagation(),P(a),N(!0)},U=async(a,b)=>{b.stopPropagation();try{let b;await (b=a.accountId,x(`/payer-accounts/${b}`,{method:"PATCH",body:JSON.stringify({status:"Archived"})})),await Q()}catch(a){console.error("Failed to archive account:",a)}};return h?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(s,{className:"h-8 w-8 animate-spin text-primary"})}):t?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsxs)("p",{className:"text-red-600 mb-4",children:["Error loading accounts: ",t]}),(0,b.jsx)(j.Button,{onClick:Q,children:"Retry"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-[#00243E]",children:"Payer Accounts"}),(0,b.jsxs)(j.Button,{onClick:()=>w(!0),size:"sm",className:"gap-2 bg-[#00243E] hover:bg-[#00243E]/90",children:[(0,b.jsx)(n.Plus,{className:"h-4 w-4"}),"Register Payer"]})]}),(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:a.map(a=>(0,b.jsxs)(d.Card,{className:"border-[#00243E] transition-all hover:shadow-md",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-[#00243E]/10",children:(0,b.jsx)(k.Building2,{className:"h-4 w-4 text-[#00243E]"})}),(0,b.jsx)("div",{className:"flex flex-col",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(d.CardTitle,{className:"text-base font-semibold text-[#00243E]",children:[a.accountName," (",a.accountId,")"]}),"Archived"===a.status&&(0,b.jsx)(i,{className:"bg-gray-500 text-white hover:bg-gray-500/90",children:"Archived"})]})})]}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(j.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:b=>{b.stopPropagation(),D(a),B(!0)},title:"Edit",children:(0,b.jsx)(m,{className:"h-4 w-4"})}),(0,b.jsx)(j.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:b=>U(a,b),title:"Archive",children:(0,b.jsx)(q,{className:"h-4 w-4"})})]})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Distributor"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:a.distributorName})]}),a.lastTransactionDate&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Last Transaction"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:a.lastTransactionDate})]})]})})]},a.id))})]}),(0,b.jsxs)("section",{children:[(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("h2",{className:"text-xl font-semibold text-[#00243E]",children:"Usage Accounts"})}),(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:f.map(c=>(0,b.jsxs)(d.Card,{className:"cursor-pointer transition-all hover:scale-[1.02] hover:shadow-md",onClick:()=>R(c),children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsx)("div",{className:"space-y-1",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(d.CardTitle,{className:"text-base font-semibold leading-tight text-[#00243E]",children:[c.customer," (",c.id,")"]}),"Registered"===c.status&&(0,b.jsx)(i,{className:"bg-[#026172] text-white hover:bg-[#026172]/90",children:"Registered"}),"Unregistered"===c.status&&(0,b.jsx)(i,{className:"bg-[#EC9400] text-white hover:bg-[#EC9400]/90",children:"Unregistered"}),"Archived"===c.status&&(0,b.jsx)(i,{className:"bg-gray-500 text-white hover:bg-gray-500/90",children:"Archived"})]})})})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2 border-b border-border pb-3",children:[c.distributorName&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Distributor"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:c.distributorName})]}),c.lastTransactionDate&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Last Transaction"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:c.lastTransactionDate})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Funds Utilization"}),(0,b.jsxs)("span",{className:"font-semibold text-foreground",children:[c.fundsUtilization,"%"]})]}),(0,b.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-200",children:(0,b.jsx)("div",{className:"h-full rounded-full bg-[#026172]",style:{width:`${c.fundsUtilization}%`}})}),(0,b.jsxs)("p",{className:"mt-1.5 text-xs text-muted-foreground",children:["€",(c.totalUsage/1e3).toFixed(1),"k of €",(c.totalDeposit/1e3).toFixed(1),"k used"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between border-t border-border pt-3",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Customer Discount"}),(0,b.jsxs)("p",{className:"text-xs font-medium text-[#026172]",children:[c.customerDiscount,"%"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[c.rebateCredits?(0,b.jsx)("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-[#026172]/10",children:(0,b.jsx)(o.Check,{className:"h-4 w-4 text-[#026172]"})}):(0,b.jsx)("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-gray-500/10",children:(0,b.jsx)(p.default,{className:"h-4 w-4 text-gray-600"})}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Rebate"})]})]}),(0,b.jsx)("div",{className:"flex gap-2",children:"Unregistered"===c.status?(0,b.jsxs)(j.Button,{onClick:b=>{b.stopPropagation(),a.length>0&&(H(a[0]),F(!0))},size:"sm",className:"flex-1 gap-2 bg-[#00243E] hover:bg-[#00243E]/90",children:[(0,b.jsx)(n.Plus,{className:"h-4 w-4"}),"Register"]}):"Registered"===c.status?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(j.Button,{onClick:a=>{a.stopPropagation(),L(c),J(!0)},size:"sm",variant:"outline",className:"flex-1 gap-2 border-[#00243E] text-[#00243E] hover:bg-[#00243E]/10",children:[(0,b.jsx)(m,{className:"h-4 w-4"}),"Edit"]}),(0,b.jsxs)(j.Button,{onClick:a=>R(c,a),size:"sm",variant:"outline",className:"flex-1 gap-2 border-[#00243E] text-[#00243E] hover:bg-[#00243E]/10",children:[(0,b.jsx)(r,{className:"h-4 w-4"}),"Details"]})]}):(0,b.jsxs)(j.Button,{onClick:a=>R(c,a),size:"sm",variant:"outline",className:"flex-1 gap-2 border-gray-500 text-gray-600 hover:bg-gray-500/10",children:[(0,b.jsx)(r,{className:"h-4 w-4"}),"Details"]})})]})]},c.id))})]})]}),(0,b.jsx)(y,{open:v,onOpenChange:w,onSuccess:Q}),(0,b.jsx)(z,{open:A,onOpenChange:B,account:C,onSuccess:Q}),(0,b.jsx)(S,{open:E,onOpenChange:F,payerAccount:G,onSuccess:Q}),(0,b.jsx)(T,{open:I,onOpenChange:J,account:K,onSuccess:Q}),O&&(0,b.jsx)(ar,{open:M,onOpenChange:N,account:O})]})}a.s(["AccountsGrid",()=>as],81673)},48700,a=>{"use strict";a.i(87924);var b=a.i(187);function c(){return null}a.i(97895),(0,b.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}}),a.i(40695),a.s(["UnregisteredAlert",()=>c],48700)}];

//# sourceMappingURL=components_f2fd4f96._.js.map