(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26457,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(70065),r=e.i(91918),i=e.i(25913),n=e.i(47163);let l=(0,i.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:s,asChild:a=!1,...i}){let c=a?r.Slot:"span";return(0,t.jsx)(c,{"data-slot":"badge",className:(0,n.cn)(l({variant:s}),e),...i})}var d=e.i(67881),o=e.i(7486),u=e.i(75254);let m=(0,u.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var x=e.i(7233),h=e.i(43531),g=e.i(41947),g=g;let p=(0,u.default)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),j=(0,u.default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),b=(0,u.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var f=e.i(30374),v=e.i(23750),N=e.i(10708),y=e.i(84762);async function C(e,t={}){let s={"Content-Type":"application/json",...t.headers},a=await fetch(`https://qwvzcttk3b.execute-api.eu-west-1.amazonaws.com/dev${e}`,{...t,headers:s});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error?.message||`API Error: ${a.statusText}`)}return 204===a.status?{}:a.json()}e.i(47167);function w({open:e,onOpenChange:a,onSuccess:r}){let[i,n]=(0,s.useState)(!1),[l,c]=(0,s.useState)(""),[o,u]=(0,s.useState)({accountId:"",accountName:"",distributorName:"",legalEntityName:"",vatNumber:"",crossAccountRoleArn:""}),[m,x]=(0,s.useState)(""),h=e=>12===e.length&&/^\d{12}$/.test(e)?(x(""),!0):(x("Account ID must be exactly 12 digits"),!1),g=e=>t=>{u(s=>({...s,[e]:t.target.value}))},p=async e=>{if(e.preventDefault(),h(o.accountId))try{let e;n(!0),c(""),await (e=o,C("/payer-accounts",{method:"POST",body:JSON.stringify(e)})),r?.(),a(!1),u({accountId:"",accountName:"",distributorName:"",legalEntityName:"",vatNumber:"",crossAccountRoleArn:""}),x("")}catch(e){c(e instanceof Error?e.message:"Failed to create payer account")}finally{n(!1)}};return(0,t.jsx)(f.Dialog,{open:e,onOpenChange:a,children:(0,t.jsxs)(f.DialogContent,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[550px]",children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsx)(f.DialogTitle,{className:"text-[#00243E]",children:"Register Payer Account"}),(0,t.jsx)(f.DialogDescription,{children:"Add a new payer account to manage billing and costs"})]}),(0,t.jsxs)("form",{onSubmit:p,children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[l&&(0,t.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:l}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(N.Label,{htmlFor:"account-id",children:["Account ID ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(v.Input,{id:"account-id",placeholder:"123456789012",value:o.accountId,onChange:e=>{let t=e.target.value.replace(/\D/g,"").slice(0,12);u(e=>({...e,accountId:t})),12===t.length?h(t):t.length>0?x("Account ID must be exactly 12 digits"):x("")},maxLength:12,required:!0,className:m?"border-red-500":""}),m&&(0,t.jsx)("p",{className:"text-xs text-red-500",children:m}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Must be exactly 12 digits"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(N.Label,{htmlFor:"account-name",children:["Account Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(v.Input,{id:"account-name",placeholder:"Production Payer Account",value:o.accountName,onChange:g("accountName"),required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(N.Label,{htmlFor:"distributor-name",children:["Distributor Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(v.Input,{id:"distributor-name",placeholder:"AWS Distributor Inc.",value:o.distributorName,onChange:g("distributorName"),required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(N.Label,{htmlFor:"legal-entity",children:["Legal Entity Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(v.Input,{id:"legal-entity",placeholder:"MSP/Partner legal entity name",value:o.legalEntityName,onChange:g("legalEntityName"),required:!0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Legal entity name of the MSP/Partner managing this payer account"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(N.Label,{htmlFor:"vat-number",children:["VAT Number ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(v.Input,{id:"vat-number",placeholder:"DE123456789",value:o.vatNumber,onChange:g("vatNumber"),required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(N.Label,{htmlFor:"role-arn",children:["Cross-Account Role ARN ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(y.Textarea,{id:"role-arn",placeholder:"arn:aws:iam::123456789012:role/BillingDataAccessRole",rows:3,value:o.crossAccountRoleArn,onChange:g("crossAccountRoleArn"),required:!0,className:"font-mono text-sm"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Required for parquet file processing from your AWS account"})]})]}),(0,t.jsxs)(f.DialogFooter,{children:[(0,t.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),(0,t.jsxs)(d.Button,{type:"submit",className:"bg-[#00243E] hover:bg-[#00243E]/90",disabled:i,children:[i&&(0,t.jsx)(b,{className:"mr-2 h-4 w-4 animate-spin"}),"Register Payer"]})]})]})]})})}function D({open:e,onOpenChange:s,account:a}){return a?(0,t.jsx)(f.Dialog,{open:e,onOpenChange:s,children:(0,t.jsxs)(f.DialogContent,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[550px]",children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsx)(f.DialogTitle,{className:"text-[#00243E]",children:"Edit Payer Account"}),(0,t.jsx)(f.DialogDescription,{children:"Update payer account information"})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(!1)},children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(N.Label,{htmlFor:"edit-account-id",children:"Account ID"}),(0,t.jsx)(v.Input,{id:"edit-account-id",value:a.accountId,disabled:!0,className:"bg-muted"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(N.Label,{htmlFor:"edit-account-name",children:"Account Name"}),(0,t.jsx)(v.Input,{id:"edit-account-name",value:a.accountName,disabled:!0,className:"bg-muted"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(N.Label,{htmlFor:"edit-distributor-name",children:["Distributor Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(v.Input,{id:"edit-distributor-name",defaultValue:a.distributorName,placeholder:"AWS Distributor Inc.",required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(N.Label,{htmlFor:"edit-legal-entity",children:["Legal Entity Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(v.Input,{id:"edit-legal-entity",defaultValue:a.legalEntityName,placeholder:"MSP/Partner legal entity name",required:!0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Legal entity name of the MSP/Partner managing this payer account"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(N.Label,{htmlFor:"edit-vat-number",children:["VAT Number ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(v.Input,{id:"edit-vat-number",defaultValue:a.vatNumber,placeholder:"DE123456789",required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(N.Label,{htmlFor:"edit-role-arn",children:["Cross-Account Role ARN ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(y.Textarea,{id:"edit-role-arn",defaultValue:a.crossAccountRoleArn,placeholder:"arn:aws:iam::123456789012:role/BillingDataAccessRole",rows:3,required:!0,className:"font-mono text-sm"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Required for parquet file processing from your AWS account"})]})]}),(0,t.jsxs)(f.DialogFooter,{children:[(0,t.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,t.jsx)(d.Button,{type:"submit",className:"bg-[#00243E] hover:bg-[#00243E]/90",children:"Save Changes"})]})]})]})}):null}var E=e.i(81140),A=e.i(20783),k=e.i(30030),S=e.i(69340),I=e.i(35804),F=e.i(48425),R="Switch",[P,L]=(0,k.createContextScope)(R),[T,U]=P(R),q=s.forwardRef((e,a)=>{let{__scopeSwitch:r,name:i,checked:n,defaultChecked:l,required:c,disabled:d,value:o="on",onCheckedChange:u,form:m,...x}=e,[h,g]=s.useState(null),p=(0,A.useComposedRefs)(a,e=>g(e)),j=s.useRef(!1),b=!h||m||!!h.closest("form"),[f=!1,v]=(0,S.useControllableState)({prop:n,defaultProp:l,onChange:u});return(0,t.jsxs)(T,{scope:r,checked:f,disabled:d,children:[(0,t.jsx)(F.Primitive.button,{type:"button",role:"switch","aria-checked":f,"aria-required":c,"data-state":O(f),"data-disabled":d?"":void 0,disabled:d,value:o,...x,ref:p,onClick:(0,E.composeEventHandlers)(e.onClick,e=>{v(e=>!e),b&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),b&&(0,t.jsx)(V,{control:h,bubbles:!j.current,name:i,value:o,checked:f,required:c,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});q.displayName=R;var B="SwitchThumb",z=s.forwardRef((e,s)=>{let{__scopeSwitch:a,...r}=e,i=U(B,a);return(0,t.jsx)(F.Primitive.span,{"data-state":O(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:s})});z.displayName=B;var V=e=>{let a,{control:r,checked:i,bubbles:n=!0,...l}=e,c=s.useRef(null),d=(a=s.useRef({value:i,previous:i}),s.useMemo(()=>(a.current.value!==i&&(a.current.previous=a.current.value,a.current.value=i),a.current.previous),[i])),o=(0,I.useSize)(r);return s.useEffect(()=>{let e=c.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==i&&t){let s=new Event("click",{bubbles:n});t.call(e,i),e.dispatchEvent(s)}},[d,i,n]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...l,tabIndex:-1,ref:c,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function O(e){return e?"checked":"unchecked"}function M({className:e,...s}){return(0,t.jsx)(q,{"data-slot":"switch",className:(0,n.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:(0,t.jsx)(z,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}let $=(e,t)=>t>e?"Customer discount cannot exceed Reseller discount.":null;function H({open:e,onOpenChange:a,payerAccount:r}){let[i,n]=(0,s.useState)(0),[l,c]=(0,s.useState)(0),[o,u]=(0,s.useState)(!1),[m,x]=(0,s.useState)(null);return(0,t.jsx)(f.Dialog,{open:e,onOpenChange:a,children:(0,t.jsxs)(f.DialogContent,{className:"sm:max-w-[525px]",children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsx)(f.DialogTitle,{className:"text-[#00243E]",children:"Register Usage Account"}),(0,t.jsx)(f.DialogDescription,{children:r?`Add a new usage account under ${r.accountName}`:"Add a new usage account with billing configuration"})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=$(i,l);t?x(t):a(!1)},children:[(0,t.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-[#00243E]",children:"Account Information"}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(N.Label,{htmlFor:"usage-id",children:"Account ID"}),(0,t.jsx)(v.Input,{id:"usage-id",placeholder:"345678901234",required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(N.Label,{htmlFor:"customer",children:"Customer Name"}),(0,t.jsx)(v.Input,{id:"customer",placeholder:"Acme Corporation",required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(N.Label,{htmlFor:"vat",children:"VAT Number"}),(0,t.jsx)(v.Input,{id:"vat",placeholder:"DE123456789",required:!0})]}),r&&(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(N.Label,{htmlFor:"payer",children:"Payer Account"}),(0,t.jsx)(v.Input,{id:"payer",value:`${r.accountName} (${r.accountId})`,disabled:!0,className:"bg-muted"})]})]}),(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-[#00243E]",children:"Financial Configuration"}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(N.Label,{htmlFor:"reseller-discount",children:"Reseller Discount (%)"}),(0,t.jsx)(v.Input,{id:"reseller-discount",type:"number",min:"0",max:"100",step:"0.01",placeholder:"15",value:i,onChange:e=>{let t;n(t=Number(e.target.value)),x($(t,l))},required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(N.Label,{htmlFor:"customer-discount",children:"Customer Discount (%)"}),(0,t.jsx)(v.Input,{id:"customer-discount",type:"number",min:"0",max:"100",step:"0.01",placeholder:"10",value:l,onChange:e=>{let t;c(t=Number(e.target.value)),x($(i,t))},required:!0})]}),m&&(0,t.jsx)("p",{className:"text-sm text-[#EBB700]",children:m})]}),(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-[#00243E]",children:"Credit Handling"}),(0,t.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(N.Label,{htmlFor:"rebate",className:"cursor-pointer font-medium",children:"Rebate Credits to Usage Account"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"If enabled, credit notes will be deducted from the Usage Account's total cost."})]}),(0,t.jsx)(M,{id:"rebate",checked:o,onCheckedChange:u})]})]})]}),(0,t.jsxs)(f.DialogFooter,{children:[(0,t.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),(0,t.jsx)(d.Button,{type:"submit",className:"bg-[#00243E] hover:bg-[#00243E]/90",children:"Register Account"})]})]})]})})}function K({open:e,onOpenChange:a,account:r}){let[i,n]=(0,s.useState)(r?.resellerDiscount||0),[l,c]=(0,s.useState)(r?.customerDiscount||0),[o,u]=(0,s.useState)(r?.rebateCredits||!1),[m,x]=(0,s.useState)(null);return r?(0,t.jsx)(f.Dialog,{open:e,onOpenChange:a,children:(0,t.jsxs)(f.DialogContent,{className:"sm:max-w-[525px]",children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsx)(f.DialogTitle,{className:"text-[#00243E]",children:"Edit Usage Account"}),(0,t.jsxs)(f.DialogDescription,{children:["Update billing configuration for ",r.customer]})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=$(i,l);t?x(t):(console.log("Updating usage account:",r?.id),a(!1))},children:[(0,t.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-[#00243E]",children:"Account Information"}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(N.Label,{htmlFor:"edit-usage-id",children:"Account ID"}),(0,t.jsx)(v.Input,{id:"edit-usage-id",value:r.id,disabled:!0,className:"bg-muted"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(N.Label,{htmlFor:"edit-customer",children:"Customer Name"}),(0,t.jsx)(v.Input,{id:"edit-customer",value:r.customer,disabled:!0,className:"bg-muted"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(N.Label,{htmlFor:"edit-vat",children:"VAT Number"}),(0,t.jsx)(v.Input,{id:"edit-vat",placeholder:"DE123456789",defaultValue:r.vatNumber,required:!0})]})]}),(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-[#00243E]",children:"Financial Configuration"}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(N.Label,{htmlFor:"edit-reseller-discount",children:"Reseller Discount (%)"}),(0,t.jsx)(v.Input,{id:"edit-reseller-discount",type:"number",min:"0",max:"100",step:"0.01",placeholder:"15",value:i,onChange:e=>{let t;n(t=Number(e.target.value)),x($(t,l))},required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(N.Label,{htmlFor:"edit-customer-discount",children:"Customer Discount (%)"}),(0,t.jsx)(v.Input,{id:"edit-customer-discount",type:"number",min:"0",max:"100",step:"0.01",placeholder:"10",value:l,onChange:e=>{let t;c(t=Number(e.target.value)),x($(i,t))},required:!0})]}),m&&(0,t.jsx)("p",{className:"text-sm text-[#EBB700]",children:m})]}),(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-[#00243E]",children:"Credit Handling"}),(0,t.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(N.Label,{htmlFor:"edit-rebate",className:"cursor-pointer font-medium",children:"Rebate Credits to Usage Account"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"If enabled, credit notes will be deducted from the Usage Account's total cost."})]}),(0,t.jsx)(M,{id:"edit-rebate",checked:o,onCheckedChange:u})]})]})]}),(0,t.jsxs)(f.DialogFooter,{children:[(0,t.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),(0,t.jsx)(d.Button,{type:"submit",className:"bg-[#00243E] hover:bg-[#00243E]/90",children:"Save Changes"})]})]})]})}):null}var _=e.i(42727),W=e.i(96626),G=e.i(86318),J=e.i(10772),X="Tabs",[Q,Y]=(0,k.createContextScope)(X,[_.createRovingFocusGroupScope]),Z=(0,_.createRovingFocusGroupScope)(),[ee,et]=Q(X),es=s.forwardRef((e,s)=>{let{__scopeTabs:a,value:r,onValueChange:i,defaultValue:n,orientation:l="horizontal",dir:c,activationMode:d="automatic",...o}=e,u=(0,G.useDirection)(c),[m,x]=(0,S.useControllableState)({prop:r,onChange:i,defaultProp:n});return(0,t.jsx)(ee,{scope:a,baseId:(0,J.useId)(),value:m,onValueChange:x,orientation:l,dir:u,activationMode:d,children:(0,t.jsx)(F.Primitive.div,{dir:u,"data-orientation":l,...o,ref:s})})});es.displayName=X;var ea="TabsList",er=s.forwardRef((e,s)=>{let{__scopeTabs:a,loop:r=!0,...i}=e,n=et(ea,a),l=Z(a);return(0,t.jsx)(_.Root,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:r,children:(0,t.jsx)(F.Primitive.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:s})})});er.displayName=ea;var ei="TabsTrigger",en=s.forwardRef((e,s)=>{let{__scopeTabs:a,value:r,disabled:i=!1,...n}=e,l=et(ei,a),c=Z(a),d=ed(l.baseId,r),o=eo(l.baseId,r),u=r===l.value;return(0,t.jsx)(_.Item,{asChild:!0,...c,focusable:!i,active:u,children:(0,t.jsx)(F.Primitive.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":o,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...n,ref:s,onMouseDown:(0,E.composeEventHandlers)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(r)}),onKeyDown:(0,E.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(r)}),onFocus:(0,E.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==l.activationMode;u||i||!e||l.onValueChange(r)})})})});en.displayName=ei;var el="TabsContent",ec=s.forwardRef((e,a)=>{let{__scopeTabs:r,value:i,forceMount:n,children:l,...c}=e,d=et(el,r),o=ed(d.baseId,i),u=eo(d.baseId,i),m=i===d.value,x=s.useRef(m);return s.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(W.Presence,{present:n||m,children:({present:s})=>(0,t.jsx)(F.Primitive.div,{"data-state":m?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":o,hidden:!s,id:u,tabIndex:0,...c,ref:a,style:{...e.style,animationDuration:x.current?"0s":void 0},children:s&&l})})});function ed(e,t){return`${e}-trigger-${t}`}function eo(e,t){return`${e}-content-${t}`}function eu({className:e,...s}){return(0,t.jsx)(es,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",e),...s})}function em({className:e,...s}){return(0,t.jsx)(er,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...s})}function ex({className:e,...s}){return(0,t.jsx)(en,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...s})}function eh({className:e,...s}){return(0,t.jsx)(ec,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",e),...s})}ec.displayName=el;var eg=e.i(91392),g=g;let ep=[{period:"2025-01",usage:5e3,fee:100,credit:234.56,customerDiscount:10,rebateCredits:!0},{period:"2024-12",usage:6300,fee:100,credit:243.21,customerDiscount:10,rebateCredits:!0},{period:"2024-11",usage:4700,fee:100,credit:176.23,customerDiscount:10,rebateCredits:!0}];function ej({open:e,onOpenChange:s,account:a}){return(0,t.jsxs)(f.Dialog,{open:e,onOpenChange:s,children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsx)(f.DialogTitle,{className:"text-[#00243E]",children:a.customer}),(0,t.jsxs)(f.DialogDescription,{children:["Account ID: ",a.id]})]}),(0,t.jsx)(f.DialogContent,{className:"sm:max-w-[600px]",children:(0,t.jsxs)(eu,{defaultValue:"overview",className:"w-full",children:[(0,t.jsxs)(em,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(ex,{value:"overview",children:"Overview"}),(0,t.jsx)(ex,{value:"transactions",children:"Transactions"})]}),(0,t.jsxs)(eh,{value:"overview",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4 rounded-lg border border-border p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Account Status"}),(0,t.jsx)(c,{variant:"secondary",className:(0,n.cn)("Active"===a.status?"bg-green-500/10 text-green-600":"bg-gray-500/10 text-gray-600"),children:a.status})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"VAT Number"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-foreground",children:a.vatNumber})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Customer Discount"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-foreground",children:[a.discountValue,"%"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Rebate Credits"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:a.rebateCredits?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Check,{className:"h-4 w-4 text-[#026172]"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-foreground",children:"Enabled"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.default,{className:"h-4 w-4 text-gray-600"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-foreground",children:"Disabled"})]})})]})]}),(0,t.jsxs)("div",{className:"space-y-3 rounded-lg border border-border p-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-[#00243E]",children:"Funds Utilization"}),(0,t.jsx)("div",{className:"h-3 w-full overflow-hidden rounded-full bg-slate-200",children:(0,t.jsx)("div",{className:"h-full rounded-full bg-[#026172]",style:{width:`${a.fundsUtilization}%`}})}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[(0,eg.formatCurrency)(a.totalUsage)," used"]}),(0,t.jsxs)("span",{className:"font-semibold text-foreground",children:[a.fundsUtilization,"%"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between border-t border-border pt-3 text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Total Deposit"}),(0,t.jsx)("span",{className:"font-semibold text-foreground",children:(0,eg.formatCurrency)(a.totalDeposit)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Remaining"}),(0,t.jsx)("span",{className:"font-semibold text-[#026172]",children:(0,eg.formatCurrency)(a.totalDeposit-a.totalUsage)})]})]})]}),(0,t.jsx)(eh,{value:"transactions",className:"space-y-3",children:(0,t.jsx)("div",{className:"divide-y divide-border rounded-lg border border-border",children:ep.map((e,s)=>{var a,r,i,n;let l,{totalCost:c,discountedCost:d}=(a=e.usage,r=e.fee,i=e.credit,n=e.customerDiscount,{totalCost:l=a+r+(e.rebateCredits?i:0),discountedCost:l-l*n/100});return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:e.period}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,t.jsxs)("span",{className:"text-[#EC9400]",children:["Usage: ",(0,eg.formatCurrency)(e.usage)]}),(0,t.jsxs)("span",{className:"text-[#00243E]",children:["Fee: ",(0,eg.formatCurrency)(e.fee)]}),e.rebateCredits&&e.credit>0&&(0,t.jsxs)("span",{className:"text-[#026172]",children:["Credit: ",(0,eg.formatCurrency)(e.credit)]})]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Net Cost: ",(0,eg.formatCurrency)(c)]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-lg font-semibold text-[#00243E]",children:(0,eg.formatCurrency)(d)}),(0,t.jsxs)("p",{className:"text-xs text-[#026172]",children:["Saved ",(0,eg.formatCurrency)(c-d)]})]})]},s)})})})]})})]})}function eb(){let[e,r]=(0,s.useState)([]),[i,n]=(0,s.useState)([]),[l,u]=(0,s.useState)(!0),[f,v]=(0,s.useState)(null),[N,y]=(0,s.useState)(!1),[E,A]=(0,s.useState)(!1),[k,S]=(0,s.useState)(null),[I,F]=(0,s.useState)(!1),[R,P]=(0,s.useState)(null),[L,T]=(0,s.useState)(!1),[U,q]=(0,s.useState)(null),[B,z]=(0,s.useState)(!1),[V,O]=(0,s.useState)(null);(0,s.useEffect)(()=>{M()},[]);let M=async()=>{try{let e,t,s,a;u(!0),v(null);let[i,l]=await Promise.all([(e=new URLSearchParams,t=e.toString(),C(`/payer-accounts${t?`?${t}`:""}`)),(s=new URLSearchParams,a=s.toString(),C(`/usage-accounts${a?`?${a}`:""}`))]);r(i.data),n(l.data)}catch(e){v(e instanceof Error?e.message:"Failed to load accounts")}finally{u(!1)}},$=(e,t)=>{t.stopPropagation(),O(e),z(!0)},_=async(e,t)=>{t.stopPropagation();try{let t;await (t=e.accountId,C(`/payer-accounts/${t}`,{method:"PATCH",body:JSON.stringify({status:"Archived"})})),await M()}catch(e){console.error("Failed to archive account:",e)}};return l?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(b,{className:"h-8 w-8 animate-spin text-primary"})}):f?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsxs)("p",{className:"text-red-600 mb-4",children:["Error loading accounts: ",f]}),(0,t.jsx)(d.Button,{onClick:M,children:"Retry"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("section",{children:[(0,t.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-[#00243E]",children:"Payer Accounts"}),(0,t.jsxs)(d.Button,{onClick:()=>y(!0),size:"sm",className:"gap-2 bg-[#00243E] hover:bg-[#00243E]/90",children:[(0,t.jsx)(x.Plus,{className:"h-4 w-4"}),"Register Payer"]})]}),(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:e.map(e=>(0,t.jsxs)(a.Card,{className:"border-[#00243E] transition-all hover:shadow-md",children:[(0,t.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-[#00243E]/10",children:(0,t.jsx)(o.Building2,{className:"h-4 w-4 text-[#00243E]"})}),(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(a.CardTitle,{className:"text-base font-semibold text-[#00243E]",children:[e.accountName," (",e.accountId,")"]}),"Archived"===e.status&&(0,t.jsx)(c,{className:"bg-gray-500 text-white hover:bg-gray-500/90",children:"Archived"})]})})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:t=>{t.stopPropagation(),S(e),A(!0)},title:"Edit",children:(0,t.jsx)(m,{className:"h-4 w-4"})}),(0,t.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:t=>_(e,t),title:"Archive",children:(0,t.jsx)(p,{className:"h-4 w-4"})})]})]}),(0,t.jsx)(a.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Distributor"}),(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:e.distributorName})]}),e.lastTransactionDate&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Last Transaction"}),(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:e.lastTransactionDate})]})]})})]},e.id))})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("h2",{className:"text-xl font-semibold text-[#00243E]",children:"Usage Accounts"})}),(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:i.map(s=>(0,t.jsxs)(a.Card,{className:"cursor-pointer transition-all hover:scale-[1.02] hover:shadow-md",onClick:()=>$(s),children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsx)("div",{className:"space-y-1",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(a.CardTitle,{className:"text-base font-semibold leading-tight text-[#00243E]",children:[s.customer," (",s.id,")"]}),"Registered"===s.status&&(0,t.jsx)(c,{className:"bg-[#026172] text-white hover:bg-[#026172]/90",children:"Registered"}),"Unregistered"===s.status&&(0,t.jsx)(c,{className:"bg-[#EC9400] text-white hover:bg-[#EC9400]/90",children:"Unregistered"}),"Archived"===s.status&&(0,t.jsx)(c,{className:"bg-gray-500 text-white hover:bg-gray-500/90",children:"Archived"})]})})})}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2 border-b border-border pb-3",children:[s.distributorName&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Distributor"}),(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:s.distributorName})]}),s.lastTransactionDate&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Last Transaction"}),(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:s.lastTransactionDate})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Funds Utilization"}),(0,t.jsxs)("span",{className:"font-semibold text-foreground",children:[s.fundsUtilization,"%"]})]}),(0,t.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-200",children:(0,t.jsx)("div",{className:"h-full rounded-full bg-[#026172]",style:{width:`${s.fundsUtilization}%`}})}),(0,t.jsxs)("p",{className:"mt-1.5 text-xs text-muted-foreground",children:["€",(s.totalUsage/1e3).toFixed(1),"k of €",(s.totalDeposit/1e3).toFixed(1),"k used"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between border-t border-border pt-3",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Customer Discount"}),(0,t.jsxs)("p",{className:"text-xs font-medium text-[#026172]",children:[s.customerDiscount,"%"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[s.rebateCredits?(0,t.jsx)("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-[#026172]/10",children:(0,t.jsx)(h.Check,{className:"h-4 w-4 text-[#026172]"})}):(0,t.jsx)("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-gray-500/10",children:(0,t.jsx)(g.default,{className:"h-4 w-4 text-gray-600"})}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Rebate"})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:"Unregistered"===s.status?(0,t.jsxs)(d.Button,{onClick:t=>{t.stopPropagation(),e.length>0&&(P(e[0]),F(!0))},size:"sm",className:"flex-1 gap-2 bg-[#00243E] hover:bg-[#00243E]/90",children:[(0,t.jsx)(x.Plus,{className:"h-4 w-4"}),"Register"]}):"Registered"===s.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.Button,{onClick:e=>{e.stopPropagation(),q(s),T(!0)},size:"sm",variant:"outline",className:"flex-1 gap-2 border-[#00243E] text-[#00243E] hover:bg-[#00243E]/10",children:[(0,t.jsx)(m,{className:"h-4 w-4"}),"Edit"]}),(0,t.jsxs)(d.Button,{onClick:e=>$(s,e),size:"sm",variant:"outline",className:"flex-1 gap-2 border-[#00243E] text-[#00243E] hover:bg-[#00243E]/10",children:[(0,t.jsx)(j,{className:"h-4 w-4"}),"Details"]})]}):(0,t.jsxs)(d.Button,{onClick:e=>$(s,e),size:"sm",variant:"outline",className:"flex-1 gap-2 border-gray-500 text-gray-600 hover:bg-gray-500/10",children:[(0,t.jsx)(j,{className:"h-4 w-4"}),"Details"]})})]})]},s.id))})]})]}),(0,t.jsx)(w,{open:N,onOpenChange:y,onSuccess:M}),(0,t.jsx)(D,{open:E,onOpenChange:A,account:k,onSuccess:M}),(0,t.jsx)(H,{open:I,onOpenChange:F,payerAccount:R,onSuccess:M}),(0,t.jsx)(K,{open:L,onOpenChange:T,account:U,onSuccess:M}),V&&(0,t.jsx)(ej,{open:B,onOpenChange:z,account:V})]})}e.s(["AccountsGrid",()=>eb],26457)},36292,e=>{"use strict";e.i(43476);var t=e.i(25913);function s(){return null}e.i(47163),(0,t.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}}),e.i(67881),e.s(["UnregisteredAlert",()=>s],36292)}]);